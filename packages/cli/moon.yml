$schema: "https://moonrepo.dev/schemas/project.json"

project:
  name: "@rcs-lang/cli"
  description: "RCL command-line interface"

id: cli

type: application
language: typescript
platform: node

dependsOn:
  - "@rcs-lang/compiler"
  - "@rcs-lang/core"
  - "@rcs-lang/file-system"
  - "@rcs-lang/parser"
  - "@rcs-lang/types"

tags:
  - typescript
  - test
  - common
  - biome
  - dprint

tasks:
  build:
    deps:
      - "^:build"
    env:
      NODE_ENV: "production"

  demo:
    command: node demo.js
    local: true
    inputs:
      - "demo.js"
      - "dist/**/*"
    deps:
      - build

  test:
    command: bun
    args: [test]
    deps:
      - build
      - "parser:build"
